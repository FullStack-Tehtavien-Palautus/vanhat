(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{23:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(17),a=n.n(c),i=n(8),s=n(2),u=n.n(s),o=n(5),l=n(4),j=(n(23),n(0)),d=function(e){var t=e.blog,n=e.handleLike,c=Object(r.useState)(!1),a=Object(l.a)(c,2),i=a[0],s=a[1];return Object(j.jsxs)("div",{class:"blogBox",children:[Object(j.jsxs)("p",{children:[t.title,Object(j.jsx)("button",{onClick:function(e){s(!i)},children:i?"hide":"show"})]}),i&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:t.url}),Object(j.jsxs)("p",{children:["likes ",t.likes," ",Object(j.jsx)("button",{blogId:t.id,onClick:n,children:"like"})]}),Object(j.jsx)("p",{children:t.author})]})]})},b=function(e){var t=e.handleLogin,n=e.username,r=e.handleUsername,c=e.password,a=e.handlePassword;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Please, log in:"}),Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("div",{children:["username:",Object(j.jsx)("input",{type:"text",name:"Username",value:n,onChange:r})]}),Object(j.jsxs)("div",{children:["password:",Object(j.jsx)("input",{type:"text",name:"Password",value:c,onChange:a})]}),Object(j.jsx)("button",{type:"submit",children:"login"})]})]})},h=function(e){var t=e.user,n=e.handleLogout;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Logged in as:"}),Object(j.jsxs)("div",{children:[t.name," (",t.username,")"]}),Object(j.jsx)("button",{onClick:n,children:"logout"})]})},f=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),c=n[0],a=n[1],i={display:c?"none":""},s={display:c?"":"none"},u=function(){a(!c)};return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:i,children:Object(j.jsx)("button",{onClick:u,children:e.buttonLabel})}),Object(j.jsxs)("div",{style:s,children:[e.children,"        ",Object(j.jsx)("button",{onClick:u,children:"cancel"})]})]})},O=n(6),p=n.n(O),x="/api/blogs",v=null,g={getAll:function(){return p.a.get(x).then((function(e){return e.data}))},setToken:function(e){v="bearer ".concat(e)},create:function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,p.a.post(x,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},console.log(t.id),e.next=4,p.a.put("".concat(x,"/").concat(t.id),t,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m={login:function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=(n(43),function(){return Object(j.jsx)("h2",{children:"blogs"})}),w=function(e){var t=e.notice,n=e.handleNotice;return null===t?Object(j.jsx)("div",{className:"noticeBox"}):Object(j.jsx)("div",{className:"noticeBox",children:Object(j.jsx)("div",{className:t.toLowerCase().startsWith("error")?"errorNotice":"infoNotice",onClick:n,children:t})})},y=function(e){var t=e.handleCreate,n=e.title,r=e.handleTitle,c=e.author,a=e.handleAuthor,i=e.url,s=e.handleUrl;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"create new"}),Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("div",{children:["title:",Object(j.jsx)("input",{type:"text",name:"Title",value:n,onChange:r})]}),Object(j.jsxs)("div",{children:["author:",Object(j.jsx)("input",{type:"text",name:"Author",value:c,onChange:a})]}),Object(j.jsxs)("div",{children:["url:",Object(j.jsx)("input",{type:"text",name:"Url",value:i,onChange:s})]}),Object(j.jsx)("button",{type:"submit",children:"create"})]})]})},S=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),s=Object(l.a)(a,2),O=s[0],p=s[1],x=Object(r.useState)(""),v=Object(l.a)(x,2),S=v[0],C=v[1],L=Object(r.useState)(""),N=Object(l.a)(L,2),T=N[0],A=N[1],U=Object(r.useState)(null),I=Object(l.a)(U,2),B=I[0],E=I[1],J=Object(r.useState)(""),P=Object(l.a)(J,2),D=P[0],R=P[1],z=Object(r.useState)(""),F=Object(l.a)(z,2),W=F[0],q=F[1],G=Object(r.useState)(""),H=Object(l.a)(G,2),K=H[0],M=H[1],Q=function(e){E(e),setTimeout((function(){E(null)}),5e3)},V=function(e,t){return e.likes<t.likes};Object(r.useEffect)((function(){g.getAll().then((function(e){return c(e.sort(V))}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("credentials");if(e){var t=JSON.parse(e);p(t)}}),[]);var X=function(e){return E(null)},Y=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("credentials"),Q("Lugged out successfully"),p(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,m.login({username:S,password:T});case 4:n=e.sent,g.setToken(n.token),window.localStorage.setItem("credentials",JSON.stringify(n)),Q("Successfully logged in as ".concat(n.username)),p(n),C(""),A(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),Q("ERROR: wrogn credentials!");case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(o.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r={title:D,author:W,url:K},g.setToken(O.token),g.create(r).then((function(e){c(n.concat(e)),Q("Successfully added blog ".concat(e.title)),R(""),q(""),M("")})).catch((function(e){return Q(e.toString())}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(u.a.mark((function e(t){var r,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=t.target.attributes.blogid.value,a=n.find((function(e){return e.id===r})),s=Object(i.a)(Object(i.a)({},a),{},{likes:a.likes+1}),g.setToken(O.token),g.update(s).then((function(e){c(n.filter((function(e){return e.id!=r})).concat(e).sort(V)),Q("Successfully liked blog ".concat(e.title))})).catch((function(e){return Q(e.toString())}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!(null===O)?Object(j.jsxs)("div",{children:[Object(j.jsx)(k,{}),Object(j.jsx)(w,{notice:B,handleNotice:X}),Object(j.jsx)(h,{user:O,handleLogout:Y}),Object(j.jsx)(f,{buttonLabel:"add blog",children:Object(j.jsx)(y,{handleCreate:$,title:D,handleTitle:function(e){return R(e.target.value)},author:W,handleAuthor:function(e){return q(e.target.value)},url:K,handleUrl:function(e){return M(e.target.value)}})}),n.map((function(e){return Object(j.jsx)(d,{blog:e,handleLike:_},e.id)}))]}):Object(j.jsxs)("div",{children:[Object(j.jsx)(k,{}),Object(j.jsx)(w,{notice:B,handleNotice:X}),Object(j.jsx)(f,{buttonLabel:"login",children:Object(j.jsx)(b,{handleLogin:Z,username:S,handleUsername:function(e){return C(e.target.value)},password:T,handlePassword:function(e){return A(e.target.value)}})})]})};a.a.render(Object(j.jsx)(S,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.3060ec68.chunk.js.map