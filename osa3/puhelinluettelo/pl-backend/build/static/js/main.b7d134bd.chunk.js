(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t(16),a=t.n(r),u=t(3),o=t(4),i=t.n(o),l="/api/persons",s={getAll:function(){return i.a.get(l).then((function(e){return e.data}))},create:function(e){return i.a.post(l,e).then((function(e){return e.data}))},delEntry:function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},replace:function(e,n){return i.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))}},d=(t(39),t(0)),f=function(e){var n=e.persons,t=e.deleter;return n.map((function(e){return Object(d.jsx)(j,{person:e,deleter:t},e.name)}))},j=function(e){var n=e.person,t=e.deleter;return Object(d.jsx)("div",{children:Object(d.jsxs)("p",{children:[n.name," ",n.number,Object(d.jsx)("button",{id:n.id,onClick:t,children:"delete"})]})})},b=function(e){var n=e.value,t=e.handle;return Object(d.jsx)("form",{children:Object(d.jsxs)("div",{children:["filter shown with:",Object(d.jsx)("input",{value:n,onChange:t})]})})},h=function(e){var n=e.name,t=e.nameHandle,c=e.number,r=e.numberHandle,a=e.submit;return Object(d.jsxs)("form",{onSubmit:a,children:[Object(d.jsx)(m,{value:n,handle:t}),Object(d.jsx)(O,{value:c,handle:r}),Object(d.jsxs)("div",{children:[" ",Object(d.jsx)("button",{type:"submit",children:"add"})," "]})]})},m=function(e){var n=e.value,t=e.handle;return Object(d.jsxs)("div",{children:[" name: ",Object(d.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.value,t=e.handle;return Object(d.jsxs)("div",{children:[" number: ",Object(d.jsx)("input",{value:n,onChange:t})]})},v=function(e){var n=e.msg;return null===n?null:Object(d.jsx)("div",{className:"infoCont",children:Object(d.jsx)("div",{className:n.startsWith("ERROR")?"error":"info",children:n})})},p=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),i=o[0],l=o[1],j=Object(c.useState)(""),m=Object(u.a)(j,2),O=m[0],p=m[1],x=Object(c.useState)(""),g=Object(u.a)(x,2),R=g[0],w=g[1],C=Object(c.useState)(null),y=Object(u.a)(C,2),E=y[0],k=y[1];Object(c.useEffect)((function(){return s.getAll().then((function(e){r(e),S("Phonebook loaded from server succesfully")})).catch((function(){S("ERROR: Cannot load phonebook from server")}))}),[]);var S=function(e){k(e),setTimeout((function(){return k(null)}),3e3),l(""),p(""),w("")},H=""===R?t:t.filter((function(e){return e.name.toLowerCase().includes(R.toLowerCase())}));return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(v,{msg:E}),Object(d.jsx)(b,{value:R,handle:function(e){return w(e.target.value)}}),Object(d.jsx)("h2",{children:"add a new"}),Object(d.jsx)(h,{name:i,nameHandle:function(e){return l(e.target.value)},number:O,numberHandle:function(e){return p(e.target.value)},submit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===i}));if(n){if(!window.confirm("".concat(i," is already added to phonebook. ")+"Do you want to replace old number (".concat(n.number,") with")+"a new one (".concat(O,")?")))return;var c=t.filter((function(e){return e.id!==n.id})),a={name:i,number:O,id:n.id};return c.push(a),void s.replace(n.id,a).then((function(){r(c),S('Contact "'.concat(i,'" replaced succesfully'))})).catch((function(){S('ERROR: Cannot replace contact "'.concat(i,'" on server')+"Is it still there? Try refreshing page.")}))}var u={name:i,number:O};s.create(u).then((function(e){r(t.concat(e)),S('Contact "'.concat(i,'" added succesfully'))})).catch((function(e){S("ERROR: ".concat(e.response.data.error))}))}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(f,{persons:H,deleter:function(e){var n=t.find((function(n){return n.id===e.target.id}));if(window.confirm('Delete "'.concat(n.name,'" ?'))){var c=t.filter((function(e){return e.id!==n.id}));s.delEntry(n.id).then((function(){r(c),S('Contact "'.concat(n.name,'" deleted succesfully.'))})).catch((function(){S('ERROR: Cannot delete contact "'.concat(n.name,'" from server'))}))}}})]})};a.a.render(Object(d.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.b7d134bd.chunk.js.map